const svg_data = {
   like: {
      path: {
         d: "M16.521 4.8443C14.8477 4.87946 13 6.19986 13 9.18908H11C11 6.19987 9.1523 4.87947 7.47899 4.84431C6.613 4.82612 5.75854 5.14366 5.11895 5.79349C4.48602 6.43656 4 7.47172 4 8.99996C4 11.4625 5.83262 13.2328 8.12412 15.0632C8.33623 15.2326 8.55317 15.4034 8.77167 15.5754C9.66522 16.2787 10.585 17.0027 11.3082 17.7411C11.5514 17.9894 11.7865 18.2529 12 18.5326C12.2135 18.2529 12.4486 17.9894 12.6918 17.7411C13.415 17.0027 14.3348 16.2787 15.2283 15.5754C15.4468 15.4034 15.6638 15.2326 15.8759 15.0632C18.1674 13.2328 20 11.4625 20 8.99996C20 7.47171 19.514 6.43655 18.881 5.79348C18.2415 5.14364 17.387 4.8261 16.521 4.8443ZM13 21.1891H11C11 20.5863 10.6641 19.9418 9.87933 19.1405C9.2556 18.5037 8.47003 17.8846 7.58867 17.1901C7.35728 17.0078 7.11928 16.8203 6.87588 16.6258C4.66738 14.8617 2 12.5374 2 8.99996C2 7.02822 2.63898 5.46203 3.69355 4.39056C4.74146 3.32586 6.137 2.81567 7.52101 2.84475C9.28097 2.88173 10.9733 3.77728 12 5.416C13.0267 3.77728 14.719 2.88173 16.479 2.84474C17.863 2.81566 19.2585 3.32584 20.3065 4.39055C21.361 5.46202 22 7.02821 22 8.99996C22 12.5374 19.3326 14.8617 17.1241 16.6258C16.8807 16.8203 16.6427 17.0078 16.4113 17.1901C15.53 17.8846 14.7444 18.5037 14.1207 19.1405C13.3359 19.9418 13 20.5863 13 21.1891Z",
         box: "0 0 24 24",
      },
      other_path: {
         d: "M12 21.1893L11 21.1893C11 20.5865 10.6641 19.942 9.87933 19.1407C9.2556 18.5038 8.47003 17.8848 7.58868 17.1903L7.58867 17.1903L7.58846 17.1902C7.35713 17.0079 7.11921 16.8204 6.87588 16.626C4.66738 14.8619 2 12.5376 2 9.00014C2 7.0284 2.63898 5.46221 3.69355 4.39074C4.74146 3.32604 6.137 2.81586 7.52101 2.84494C9.28097 2.88192 10.9733 3.77747 12 5.41619C13.0267 3.77746 14.719 2.88191 16.479 2.84493C17.863 2.81584 19.2585 3.32602 20.3065 4.39073C21.361 5.4622 22 7.02839 22 9.00014C22 12.5376 19.3326 14.8619 17.1241 16.626C16.8807 16.8205 16.6427 17.008 16.4113 17.1903C15.53 17.8848 14.7444 18.5038 14.1207 19.1407C13.3359 19.942 13 20.5865 13 21.1893L12 21.1893Z",
         box: "0 0 24 24",
      }
   },
   dislike: {
      path: {
         d: "M19.7366 19.5892L23.1641 22.4757L24.6672 20.691L2.50164 2.02429L0.998615 3.80905L3.59416 5.99488C2.79618 7.16898 2.33346 8.68763 2.33346 10.5C2.33346 14.627 5.4454 17.3387 8.02199 19.3968C8.30596 19.6237 8.58361 19.8424 8.85357 20.0552L8.85361 20.0552L8.85367 20.0552C9.88188 20.8655 10.7984 21.5876 11.526 22.3306C12.4416 23.2654 12.8335 24.0173 12.8335 24.7206H15.1668C15.1668 24.0173 15.5587 23.2654 16.4742 22.3306C17.2019 21.5876 18.1184 20.8654 19.1466 20.0552L19.1467 20.0552C19.3396 19.9032 19.5364 19.7481 19.7366 19.5892ZM17.9145 18.0547L5.39418 7.51077C4.95773 8.24088 4.6668 9.22284 4.6668 10.5C4.6668 13.3729 6.80486 15.4382 9.47827 17.5737C9.72573 17.7714 9.97883 17.9706 10.2338 18.1713C11.2762 18.9918 12.3493 19.8365 13.193 20.6979C13.4768 20.9877 13.751 21.295 14.0001 21.6214C14.2493 21.295 14.5235 20.9877 14.8073 20.6979C15.651 19.8365 16.724 18.9918 17.7665 18.1713L17.7666 18.1712C17.816 18.1323 17.8653 18.0935 17.9145 18.0547ZM19.2256 3.31887C17.3055 3.35922 15.4544 4.27548 14.2429 5.95757L16.0379 7.46042C16.8458 6.24661 18.0972 5.67643 19.2746 5.65169C20.285 5.63046 21.2818 6.00092 22.028 6.75906C22.7664 7.50931 23.3335 8.717 23.3335 10.5C23.3335 11.4259 23.1114 12.2679 22.7209 13.0554L24.5472 14.5844C25.2296 13.3951 25.6668 12.0469 25.6668 10.5C25.6668 8.19958 24.9213 6.37236 23.691 5.12231C22.4684 3.88015 20.8403 3.28494 19.2256 3.31887Z",
         box: "0 0 28 28",
      },
      other_path: {
         d: "M19.7366 19.5892L23.1642 22.4757L24.6672 20.691L21.5615 18.0755C21.564 18.0732 21.5665 18.071 21.5691 18.0687L18.8996 15.8338L2.50166 2.02429L0.998628 3.80904L3.59417 5.99488C2.79619 7.16897 2.33348 8.68762 2.33348 10.5C2.33348 14.627 5.44542 17.3387 8.022 19.3968C8.30597 19.6236 8.58363 19.8424 8.85358 20.0552L8.85364 20.0552C9.88187 20.8654 10.7984 21.5876 11.526 22.3306C12.4416 23.2654 12.8335 24.0173 12.8335 24.7206L14.0001 24.7206L15.1668 24.7206C15.1668 24.0173 15.5587 23.2654 16.4743 22.3306C17.2019 21.5876 18.1184 20.8654 19.1466 20.0552L19.1467 20.0552L19.147 20.0549L19.1479 20.0542C19.3404 19.9025 19.5368 19.7478 19.7366 19.5892ZM25.6668 10.5C25.6668 12.0788 25.2114 13.4504 24.5048 14.6576L14.1944 6.02571C15.4048 4.30024 17.2798 3.35976 19.2256 3.31887C20.8403 3.28494 22.4684 3.88015 23.691 5.12231C24.9213 6.37235 25.6668 8.19958 25.6668 10.5Z",
         box: "0 0 28 28",
      }
   },
   prev: {
      path: {
         d: "M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z",
         box: "0 0 320 512",
      }
   },
   next: {
      path: {
         d: "M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z",
         box: "0 0 320 512",
      }
   },
   eye: {
      path: {
         d: "M512,282.163c-0.881-1.49-21.826-38.71-63.998-76.621c-21.106-18.932-47.584-38.03-79.667-52.494   c-32.041-14.455-69.743-24.183-112.337-24.162c-42.595-0.014-80.296,9.707-112.341,24.162   c-48.12,21.722-83.626,53.753-107.33,80.244C12.627,259.846,0.644,281.037,0,282.163l29.331,16.484l13.676,7.749l0.024-0.042   l0.007-0.014c0.895-1.629,20.324-34.688,56.487-66.326c18.068-15.848,40.244-31.331,66.274-42.786   c26.061-11.456,55.91-18.96,90.199-18.974c35.104,0.014,65.561,7.881,92.056,19.798c39.685,17.848,70.324,45.171,90.808,68.131   c10.245,11.462,17.938,21.785,22.98,29.1c2.525,3.657,4.385,6.566,5.574,8.49c0.594,0.966,1.02,1.679,1.286,2.119l0.252,0.448   l0.042,0.063l9.707-5.518l-9.734,5.469L512,282.163z",
         box: "0 0 514 514",
      },
      other_path: {
         d: "M1.60603 6.08062C2.11366 5.86307 2.70154 6.09822 2.9191 6.60585L1.99995 6.99977C2.9191 6.60585 2.91924 6.60618 2.9191 6.60585L2.91858 6.60465C2.9183 6.604 2.91851 6.60447 2.91858 6.60465L2.9225 6.61351C2.92651 6.62253 2.93339 6.63785 2.94319 6.65905C2.96278 6.70147 2.99397 6.76735 3.03696 6.85334C3.12302 7.02546 3.25594 7.27722 3.43737 7.58203C3.80137 8.19355 4.35439 9.00801 5.10775 9.81932C5.28532 10.0105 5.47324 10.2009 5.67173 10.3878C5.68003 10.3954 5.68823 10.4031 5.69633 10.4109C7.18102 11.8012 9.25227 12.9998 12 12.9998C13.2089 12.9998 14.2783 12.769 15.2209 12.398C16.4469 11.9154 17.4745 11.1889 18.3156 10.3995C19.2652 9.50815 19.9627 8.54981 20.4232 7.81076C20.6526 7.44268 20.8207 7.13295 20.9299 6.91886C20.9844 6.81192 21.0241 6.72919 21.0491 6.67538C21.0617 6.64848 21.0706 6.62884 21.0758 6.61704L21.0808 6.60585C21.2985 6.0985 21.8864 5.86312 22.3939 6.08062C22.9015 6.29818 23.1367 6.88606 22.9191 7.39369L22 6.99977C22.9191 7.39369 22.9192 7.39346 22.9191 7.39369L22.9169 7.39871L22.9134 7.40693L22.9019 7.43278C22.8924 7.4541 22.879 7.48354 22.8618 7.52048C22.8274 7.59434 22.7774 7.69831 22.7115 7.8275C22.5799 8.08566 22.384 8.44584 22.1206 8.86844C21.718 9.5146 21.152 10.316 20.4096 11.1241L21.2071 11.9215C21.5976 12.312 21.5976 12.9452 21.2071 13.3357C20.8165 13.7262 20.1834 13.7262 19.7928 13.3357L18.9527 12.4955C18.3884 12.9513 17.757 13.3811 17.0558 13.752L17.8381 14.9544C18.1393 15.4173 18.0083 16.0367 17.5453 16.338C17.0824 16.6392 16.463 16.5081 16.1618 16.0452L15.1763 14.5306C14.4973 14.7388 13.772 14.8863 13 14.9554V16.4998C13 17.0521 12.5522 17.4998 12 17.4998C11.4477 17.4998 11 17.0521 11 16.4998V14.9556C10.2253 14.8864 9.50014 14.7386 8.82334 14.531L7.83814 16.0452C7.53693 16.5081 6.91748 16.6392 6.45457 16.338C5.99165 16.0367 5.86056 15.4173 6.16177 14.9544L6.94417 13.7519C6.24405 13.3814 5.61245 12.9515 5.04746 12.4953L4.20706 13.3357C3.81654 13.7262 3.18337 13.7262 2.79285 13.3357C2.40232 12.9452 2.40232 12.312 2.79285 11.9215L3.59029 11.1241C2.74529 10.2043 2.12772 9.292 1.71879 8.605C1.5096 8.25356 1.35345 7.95845 1.2481 7.74776C1.19539 7.64234 1.15529 7.55783 1.12752 7.49771C1.11363 7.46765 1.10282 7.44366 1.09505 7.42618L1.08566 7.4049L1.08267 7.39801L1.0816 7.39553L1.08117 7.39453C1.08098 7.39409 1.08081 7.39369 1.99995 6.99977L1.08117 7.39453C0.863613 6.8869 1.0984 6.29818 1.60603 6.08062Z",
         box: "0 0 24 24",
      }
   }
}

class SvgButton {
   constructor(alias, onclick, path_config) {
      this.path_config = path_config
      this.alias = alias
      let [button, path, svg] = this.generate_button(onclick, path_config)
      this.button = button
      this.path = path
      this.svg = svg
   }

   set_onclick(button, onclick) {
      button.addEventListener('click', onclick)
   }

   generate_button(onclick, path_config) {
      let button = document.createElement('button');
      button.classList.add('svg-button')
      this.set_onclick(button, onclick)

      let svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
      svg.classList.add('icon-svg')

      let path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      path.classList.add('svg-path-empty')

      svg.appendChild(path)
      button.appendChild(svg)

      this.apply_path_config(svg, path, path_config)

      return [button, path, svg]
   }

   apply_path_config(svg, path, path_config) {
      svg.setAttribute('viewBox', path_config.box)
      path.setAttribute('d', path_config.d);
   }

   get_button() { return this.button }
}

class TwoStateSvgButton extends SvgButton {
   constructor(alias, onclick, path_config, other_path_config) {
      super(alias, onclick, path_config)
      this.other_path_config = other_path_config
      this.is_other_state = false
   }

   set_onclick(button, onclick) {
      button.addEventListener('click', () => onclick(this.is_other_state))
   }

   change_state(is_other_state = false) {
      if (is_other_state) {
         this.apply_path_config(this.svg, this.path, this.other_path_config)

         this.path.classList.remove('svg-path-empty')
         this.path.classList.add('svg-path-full')
      } else {
         this.apply_path_config(this.svg, this.path, this.path_config)

         this.path.classList.remove('svg-path-full')
         this.path.classList.add('svg-path-empty')
      }
      this.is_other_state = is_other_state
   }
}

export function generate_buttons(event_config) {
   let buttons = {}
   for (let [alias, onclick] of Object.entries(event_config)) {
      if (!alias in svg_data)
         throw new Error(`unknown button ${alias}`)
      let data = svg_data[alias]
      let button = null
      if (!data.other_path)
         button = new SvgButton(alias, onclick, data.path)
      else
         button = new TwoStateSvgButton(alias, onclick, data.path, data.other_path)

      buttons[alias] = button
   }
   return buttons
}

export function generate_buttons_div(buttons, order) {
   let div = document.createElement('div')
   div.classList.add('svg-div')
   for (let alias of order) {
      if (!alias in buttons)
         throw new Error(`unknown button ${alias}`)
      div.appendChild(buttons[alias].get_button())
   }
   return div
}